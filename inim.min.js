$(function(){jQuery.inim={};jQuery.inim.canvasEdgeDetection=function(c){var e=$.inim.canvasIoFactory(c),j=e[0],d=e[2];d=$.inim.doEdgeDetectionAlgorithm(e[1],127,0,j);j.putImageData(d,0,0);return c};jQuery.inim.canvasNeonLines=function(c){var e=$.inim.canvasIoFactory(c),j=e[0],d=e[2];d=$.inim.doEdgeDetectionAlgorithm(e[1],0,0,j);j.putImageData(d,0,0);return c};jQuery.inim.canvasBWOutline=function(c){var e=$.inim.canvasIoFactory(c),j=e[0],d=e[1];e=e[2];var i=d.width,k=d.height,f=i-1,m=k-1;e=$.inim.doEdgeDetectionAlgorithm(d,
255,1,j);d=e.data;for(var h=0,n=0;n<k;++n)for(var o=0;o<i;++o){if(o===0||n===0||o==f||n==m){d[h]=255;d[++h]=255;d[++h]=255}else if(d[h]<240){d[h]=0;d[++h]=0;d[++h]=0}else{d[h]=255;d[++h]=255;d[++h]=255}d[++h]=255;++h}j.putImageData(e,0,0);return c};jQuery.inim.canvasRipples=function(c){var e=$.inim.canvasIoFactory(c),j=e[0],d=e[2],i=e[1];cv2=document.createElement("canvas");e=$(c).attr("width");d=$(c).attr("height");cv2.height=d;cv2.width=e;var k=cv2.getContext("2d"),f=k.createRadialGradient(182,
182,1,256,256,384);f.addColorStop(0,"rgba(255,255,0,1)");f.addColorStop(0.05,"rgba(255,0,0,1)");f.addColorStop(0.1,"rgba(255,255,0,1)");f.addColorStop(0.15,"rgba(255,0,0,1)");f.addColorStop(0.2,"rgba(255,255,0,1)");f.addColorStop(0.25,"rgba(255,0,0,1)");f.addColorStop(0.3,"rgba(255,255,0,1)");f.addColorStop(0.35,"rgba(255,0,0,1)");f.addColorStop(0.4,"rgba(255,255,0,1)");f.addColorStop(0.45,"rgba(255,0,0,1)");f.addColorStop(0.5,"rgba(255,255,0,1)");f.addColorStop(0.55,"rgba(255,0,0,1)");f.addColorStop(0.6,
"rgba(255,255,0,1)");f.addColorStop(0.65,"rgba(255,0,0,1)");f.addColorStop(0.7,"rgba(255,255,0,1)");f.addColorStop(0.75,"rgba(255,0,0,1)");f.addColorStop(0.8,"rgba(255,255,0,1)");f.addColorStop(0.85,"rgba(255,0,0,1)");f.addColorStop(0.9,"rgba(255,255,0,1)");f.addColorStop(0.95,"rgba(255,0,0,1)");f.addColorStop(1,"rgba(255,255,0,1)");k.fillStyle=f;k.fillRect(0,0,e,d);e=j.createImageData(c.width,c.height);d=i.width;f=i.height;i=i.data;var m=e.data;k=k.getImageData(0,0,c.width,c.height).data;for(var h=
0,n=0;n<f;++n)for(var o=0;o<d;++o){var l=0.2*(k[h+1]-128)|0;l=((l+n)*d+o+l)*4;m[h]=i[l];m[++h]=i[++l];m[++h]=i[++l];m[++h]=i[++l];++h}d=e;j.putImageData(d,0,0);return c};jQuery.inim.doEdgeDetectionAlgorithm=function(c,e,j,d){d=d.createImageData(c.width,c.height);var i=c.width,k=c.data,f=d.data,m=i*4,h=m+4;c=c.height-1;i=i-1;for(var n=1;n<c;++n){for(var o=h-4,l=o-m,p=o+m,q=-k[l]-k[o]-k[p],D=-k[++l]-k[++o]-k[++p],E=-k[++l]-k[++o]-k[++p],r=k[l+=2],s=k[o+=2],t=k[p+=2],u=-r-s-t,v=k[++l],w=k[++o],x=k[++p],
y=-v-w-x,z=k[++l],A=k[++o],B=k[++p],C=-z-A-B,F=1;F<i;++F){o=h+4;l=o-m;p=o+m;var G=e+q-r-s*-8-t,H=e+D-v-w*-8-x,I=e+E-z-A*-8-B;q=u;D=y;E=C;r=k[l];s=k[o];t=k[p];u=-r-s-t;v=k[++l];w=k[++o];x=k[++p];y=-v-w-x;z=k[++l];A=k[++o];B=k[++p];C=-z-A-B;if(j){factor=0.3*(G+u)+0.59*(H+y)+0.11*(I+C);f[h]=factor;f[++h]=factor;f[++h]=factor}else{f[h]=G+u;f[++h]=H+y;f[++h]=I+C}f[++h]=255;++h}h+=8}return d};jQuery.inim.canvasServicePingUrl="";jQuery.inim.setCanvasServicePingUrl=function(c){if(c)jQuery.inim.canvasServicePingUrl=
c;else return jQuery.inim.canvasServicePingUrl};jQuery.inim.getCanvasServicePingUrl=function(c){return jQuery.inim.setCanvasServicePingUrl(c)};jQuery.inim.canvasIoFactory=function(c,e){try{var j=$(c)[0].getContext("2d"),d=j.getImageData(0,0,$(c)[0].width,$(c)[0].height);if(e===true)return[j,d];var i=j.createImageData($(c)[0].width,$(c)[0].height);return[j,d,i]}catch(k){navigator.userAgent.match(/iPad/i)!=null?alert("Sorry, there is a bug in the current iPad browser which breaks this cool site! The bug got submitted to Apple."):
alert("Uh oh, an error happened, please reaload site.");return false}};jQuery.inim.setPixel=function(c,e,j,d,i,k,f){index=(e+j*c.width)*4;c.data[index+0]=d;c.data[index+1]=i;c.data[index+2]=k;c.data[index+3]=f;return d=[c,e,j,d,i,k,f]};jQuery.inim.getPixel=function(c,e,j){index=(e+j*c.width)*4;d=c.data[index+0];g=c.data[index+1];b=c.data[index+2];a=c.data[index+3];var d=[c,e,j,d,g,b,a];return d};jQuery.inim.getPixelOpt=function(c,e,j,d){index=(e+j*d)*4;d=c[index+0];g=c[index+1];b=c[index+2];a=c[index+
3];return d=[e,j,d,g,b,a]};jQuery.inim.setPixelOpt=function(c,e,j,d,i,k,f,m){index=(e+j*m)*4;c[index+0]=d;c[index+1]=i;c[index+2]=k;c[index+3]=f;return c};jQuery.inim.canvasBlackWhite=function(c){var e=$.inim.canvasIoFactory(c),j=e[0],d=e[1];e=e[2];for(var i=d.width,k=d.height,f=0;f<k;f+=1)for(var m=0;m<i;m+=1){var h=(f*i+m)*4,n=d.data[h]*0.3+d.data[h+1]*0.59+d.data[h+2]*0.11;e.data[h]=n*1;e.data[h+1]=n*1;e.data[h+2]=n*1;e.data[h+3]=d.data[h+3]}j.putImageData(e,0,0);return c};jQuery.inim.canvasByColor=
function(c,e,j,d){var i=$.inim.canvasIoFactory(c),k=i[0],f=i[1];i=i[2];for(var m=f.width,h=f.height,n=0;n<h;n+=1)for(var o=0;o<m;o+=1){var l=(n*m+o)*4;i.data[l]=Math.round(f.data[l]*e);i.data[l+1]=Math.round(f.data[l]*j);i.data[l+2]=Math.round(f.data[l]*d);i.data[l+3]=f.data[l+3];for(l=0;l<4;l+=1)if(i.data[l]<0)i.data[l]=0;else if(i.data[l]>255)i.data[l]=255}k.putImageData(i,0,0);return c};jQuery.inim.canvasRed=function(c){return $.inim.canvasByColor(c,1,0,0)};jQuery.inim.canvasGreen=function(c){return $.inim.canvasByColor(c,
0,1,0)};jQuery.inim.canvasBlue=function(c){return $.inim.canvasByColor(c,0,0,1)};jQuery.inim.canvasYellow=function(c){return $.inim.canvasByColor(c,1,1,0)};jQuery.inim.canvasMagenta=function(c){return $.inim.canvasByColor(c,1,0,1)};jQuery.inim.canvasAqua=function(c){return $.inim.canvasByColor(c,0,1,1)};jQuery.inim.canvasTint=function(c,e){var j=$.inim.canvasIoFactory(c),d=j[0],i=j[1];j=j[2];var k=i.width,f=i.height,m=parseInt(e.red||0),h=parseInt(e.green||0),n=parseInt(e.blue||0);i=i.data;for(var o=
j.data,l=1;l<f-1;l+=1)for(var p=1;p<k-1;p+=1){var q=(l*k+p)*4;o[q]=0.7*m+0.3*i[q]|0;o[q+1]=0.7*h+0.3*i[q+1]|0;o[q+2]=0.7*n+0.3*i[q+2]|0;o[q+3]=255}d.putImageData(j,0,0);return c};jQuery.inim.canvasInvert=function(c){var e=$.inim.canvasIoFactory(c),j=e[0],d=e[1];e=e[2];for(var i=d.width,k=d.height,f=1;f<k-1;f+=1)for(var m=1;m<i-1;m+=1){for(var h=(f*i+m)*4,n=0;n<3;n+=1)e.data[h+n]=255-d.data[h+n];e.data[h+3]=d.data[h+3]}j.putImageData(e,0,0);return c};jQuery.inim.canvasWatermark=function(c){var e=$.inim.canvasIoFactory(c),
j=e[0],d=e[1];e=e[2];for(var i=d.width,k=d.height,f=1;f<k-1;f+=1)for(var m=1;m<i-1;m+=1){var h=(f*i+m)*4,n=d.data[h]*0.3+d.data[h+1]*0.59+d.data[h+2]*0.11;e.data[h]=n;e.data[h+1]=n;e.data[h+2]=n;e.data[h+3]=32}j.putImageData(e,0,0);return c};jQuery.inim.canvasFranz=function(c){var e=$.inim.canvasIoFactory(c),j=e[0],d=e[1];e=e[2];for(var i=d.width,k=d.height,f=1;f<k-1;f+=1)for(var m=1;m<i-1;m+=1){for(var h=(f*i+m)*4,n=0;n<3;n+=1)e.data[h+n]=Math.floor(d.data[h+n]/2);e.data[h+3]=d.data[h+3]}j.putImageData(e,
0,0);return c};jQuery.fn.inimCanvasDoIt=function(c,e){var j=e||{};return this.each(function(){if($(this).get(0).tagName=="IMG"&&$(this).parent().get(0).tagName!="CANVAS")$(this).inimImgCanvas().load(function(){$(this).inimCanvasDoIt(c,j)});else if($(this).get(0).tagName=="IMG"&&$(this).parent().get(0).tagName=="CANVAS")c($(this).parent().get(0),j);else $(this).get(0).tagName=="CANVAS"&&c($(this).get(0),j)})};jQuery.fn.inimBlackWhite=function(){return $(this).inimCanvasDoIt($.inim.canvasBlackWhite)};
jQuery.fn.inimRed=function(){return $(this).inimCanvasDoIt($.inim.canvasRed)};jQuery.fn.inimBlue=function(){return $(this).inimCanvasDoIt($.inim.canvasBlue)};jQuery.fn.inimGreen=function(){return $(this).inimCanvasDoIt($.inim.canvasGreen)};jQuery.fn.inimYellow=function(){return $(this).inimCanvasDoIt($.inim.canvasYellow)};jQuery.fn.inimMagenta=function(){return $(this).inimCanvasDoIt($.inim.canvasMagenta)};jQuery.fn.inimAqua=function(){return $(this).inimCanvasDoIt($.inim.canvasAqua)};jQuery.fn.inimInvert=
function(){return $(this).inimCanvasDoIt($.inim.canvasInvert)};jQuery.fn.inimWatermark=function(){return $(this).inimCanvasDoIt($.inim.canvasWatermark)};jQuery.fn.inimFranz=function(){return $(this).inimCanvasDoIt($.inim.canvasFranz)};jQuery.fn.inimEdgeDetection=function(){return $(this).inimCanvasDoIt($.inim.canvasEdgeDetection)};jQuery.fn.inimBwOutline=function(){return $(this).inimCanvasDoIt($.inim.canvasBWOutline)};jQuery.fn.inimRipples=function(){return $(this).inimCanvasDoIt($.inim.canvasRipples)};
jQuery.fn.inimTint=function(c){return $(this).inimCanvasDoIt($.inim.canvasTint,c)};jQuery.fn.inimImgCanvas=function(c){var e;this.each(function(){if($(this).get(0).tagName=="IMG"&&$(this).parent().get(0).tagName!="CANVAS"){var j=this;$(j).attr("inim","inimImgCanvas");var d=$('<canvas class="inimImgCanvas">'+$("<div>").append($(this).eq(0).clone()).html()+"</canvas>");$(d).attr("id",$(this).attr("id")+"_canvas");e=e?e.add($(d)):$(d);var i=false,k=false,f=0,m=document.location.protocol+"//"+document.location.hostname,
h=$(j).attr("src").substr(0,m.length);if($(j).attr("src").substr(0,11)=="data:image/")k=true;if(m!=h&&k===false)i=true;m=$.inim.getCanvasServicePingUrl();var n=true,o=function(){n=false;$(d).attr("width",this.width);$(d).attr("height",this.height);var l=$(d)[0].getContext("2d"),p=new Image;p.src=$(this).attr("src");p.width=this.width;p.height=this.height;l.drawImage(p,0,0,p.width,p.height);$(d).data("imgsrc",this.src);$(this).replaceWith($(d));$(d).trigger("load");$(d).trigger("canvasload");$.isFunction(c)&&
c($(d))};if(i&&m){if(sessionStorage&&sessionStorage.getItem($(j).attr("src"))){$(j).attr("src",sessionStorage.getItem($(j).attr("src")));$(j).load(o)}else $.get(m,{url:$(this).attr("src")},function(l){sessionStorage&&sessionStorage.setItem($(j).attr("src"),l);$(j).load(o);$(j).attr("src",l)});f++}else $(this).load(o);if(n==true&&$(this).attr("src")!=""&&$(this).attr("width")&&$(this).attr("height")&&f===0){i=$(this).attr("src");$(this).attr("src","");$(this).attr("src",i)}else if(k===true){$(this).trigger("load");
alert("isdatauri")}}});return $(e)};$.inim.setCanvasServicePingUrl("http://www.barbafan.de/wp-content/ipad-ausmalbilder/ping.php")});